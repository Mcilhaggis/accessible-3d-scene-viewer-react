{"version":3,"file":"a11y.cjs.production.min.js","sources":["../src/announceStore.tsx","../src/A11yConsts.tsx","../src/A11ySection.tsx","../src/Html.tsx","../src/A11y.tsx","../src/A11yUserPreferences.tsx","../src/A11yAnnouncer.tsx","../src/A11yDebuger.tsx"],"sourcesContent":["import create from 'zustand';\n\ntype State = {\n  message: string;\n  a11yScreenReader: (message: string) => void;\n};\n\nconst useAnnounceStore = create<State>((set) => {\n  return {\n    message: '',\n    a11yScreenReader: (message) => {\n      set(() => {\n        return { message: message };\n      });\n    },\n  };\n});\n\nexport default useAnnounceStore;\n","let stylesHiddenButScreenreadable = {\n  opacity: 0,\n  borderRadius: '50%',\n  width: '50px',\n  height: '50px',\n  overflow: 'hidden',\n  transform: 'translateX(-50%) translateY(-50%)',\n  display: 'inline-block',\n  userSelect: 'none' as const,\n  WebkitUserSelect: 'none' as const,\n  WebkitTouchCallout: 'none' as const,\n  margin: 0,\n};\n\nexport { stylesHiddenButScreenreadable };\n","import React, {\n  useContext,\n  useEffect,\n  useRef,\n  MutableRefObject,\n  createRef,\n} from 'react';\nimport { useThree } from '@react-three/fiber';\nimport { stylesHiddenButScreenreadable } from './A11yConsts';\n\ninterface Props {\n  children: React.ReactNode;\n  label: string;\n  description: string;\n}\n\nconst A11ySectionContext = React.createContext<\n  MutableRefObject<HTMLElement | null>\n>(createRef());\n\nA11ySectionContext.displayName = 'A11ySectionContext';\n\nconst useA11ySectionContext = () => {\n  return useContext(A11ySectionContext);\n};\n\nexport { useA11ySectionContext };\n\nexport const A11ySection: React.FC<Props> = ({\n  children,\n  label,\n  description,\n}) => {\n  const ref = useRef<HTMLElement | null>(null);\n  const refpDesc = useRef<HTMLParagraphElement | null>(null);\n  const gl = useThree((state) => state.gl);\n  const [el] = React.useState(() => document.createElement('section'));\n  const target = gl.domElement.parentNode;\n\n  useEffect(() => {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    if (label) {\n      el.setAttribute('aria-label', label);\n    }\n    el.setAttribute('r3f-a11y', 'true');\n    el.setAttribute(\n      'style',\n      ((styles) => {\n        return Object.keys(styles).reduce(\n          (acc, key) =>\n            acc +\n            key\n              .split(/(?=[A-Z])/)\n              .join('-')\n              .toLowerCase() +\n            ':' +\n            (styles as any)[key] +\n            ';',\n          ''\n        );\n      })(stylesHiddenButScreenreadable)\n    );\n    if (description) {\n      if (refpDesc.current === null) {\n        const pDesc = document.createElement('p');\n        pDesc.innerHTML = description;\n        pDesc.style.cssText =\n          'border: 0!important;clip: rect(1px,1px,1px,1px)!important;-webkit-clip-path: inset(50%)!important;clip-path: inset(50%)!important;height: 1px!important;margin: -1px!important;overflow: hidden!important;padding: 0!important;position: absolute!important;width: 1px!important;white-space: nowrap!important;';\n        el.prepend(pDesc);\n        refpDesc.current = pDesc;\n      } else {\n        refpDesc.current.innerHTML = description;\n      }\n    }\n    return () => {\n      if (target) target.removeChild(el);\n    };\n  }, [description, label]);\n\n  if (ref.current === null) {\n    if (target) {\n      target.appendChild(el);\n    }\n    ref.current = el;\n  }\n\n  return (\n    <>\n      <A11ySectionContext.Provider value={ref}>\n        {children}\n      </A11ySectionContext.Provider>\n    </>\n  );\n};\n","//https://raw.githubusercontent.com/pmndrs/drei/master/src/web/Html.tsx\nimport * as React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport {\n  Vector3,\n  Group,\n  Object3D,\n  Camera,\n  PerspectiveCamera,\n  OrthographicCamera,\n} from 'three';\nimport { Assign } from 'utility-types';\nimport { ReactThreeFiber, useFrame, useThree } from '@react-three/fiber';\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(\n  el: Object3D,\n  camera: Camera,\n  size: { width: number; height: number }\n) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [\n    objectPos.x * widthHalf + widthHalf,\n    -(objectPos.y * heightHalf) + heightHalf,\n  ];\n}\n\nfunction isObjectBehindCamera(el: Object3D, camera: Camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectZIndex(\n  el: Object3D,\n  camera: Camera,\n  zIndexRange: Array<number>\n) {\n  if (\n    camera instanceof PerspectiveCamera ||\n    camera instanceof OrthographicCamera\n  ) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n  return undefined;\n}\n\nexport interface HtmlProps\n  extends Omit<\n    Assign<\n      React.HTMLAttributes<HTMLDivElement>,\n      ReactThreeFiber.Object3DNode<Group, typeof Group>\n    >,\n    'ref'\n  > {\n  eps?: number;\n  portal?: React.MutableRefObject<HTMLElement>;\n  zIndexRange?: Array<number>;\n}\n\nexport const Html = React.forwardRef(\n  (\n    {\n      children,\n      eps = 0.001,\n      style,\n      className,\n      portal,\n      zIndexRange = [16777271, 0],\n      ...props\n    }: HtmlProps,\n    ref: React.Ref<HTMLDivElement>\n  ) => {\n    const gl = useThree(({ gl }) => gl);\n    const camera = useThree(({ camera }) => camera);\n    const scene = useThree(({ scene }) => scene);\n    const size = useThree(({ size }) => size);\n    const [el] = React.useState(() => document.createElement('div'));\n    const root = React.useMemo(() => ReactDOM.createRoot(el), [el]);\n    const group = React.useRef<Group>(null);\n    const oldZoom = React.useRef(0);\n    const oldPosition = React.useRef([0, 0]);\n    const target = portal?.current ?? gl.domElement.parentNode;\n\n    React.useEffect(() => {\n      if (group.current) {\n        scene.updateMatrixWorld();\n        const vec = calculatePosition(group.current, camera, size);\n        el.style.cssText = `position:absolute;top:0;left:0;transform:translate3d(${vec[0]}px,${vec[1]}px,0);transform-origin:0 0;`;\n        if (target) {\n          target.appendChild(el);\n        }\n        return () => {\n          if (target) target.removeChild(el);\n          root.unmount();\n        };\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [target]);\n\n    const styles: React.CSSProperties = React.useMemo(() => {\n      return {\n        position: 'absolute',\n        transform: 'none',\n        ...style,\n      };\n    }, [style, size]);\n\n    React.useLayoutEffect(() => {\n      root.render(\n        <div\n          ref={ref}\n          style={styles}\n          className={className}\n          children={children}\n        />\n      );\n    });\n\n    useFrame(() => {\n      if (group.current) {\n        camera.updateMatrixWorld();\n        const vec = calculatePosition(group.current, camera, size);\n\n        if (\n          Math.abs(oldZoom.current - camera.zoom) > eps ||\n          Math.abs(oldPosition.current[0] - vec[0]) > eps ||\n          Math.abs(oldPosition.current[1] - vec[1]) > eps\n        ) {\n          el.style.display = !isObjectBehindCamera(group.current, camera)\n            ? 'block'\n            : 'none';\n          el.style.zIndex = `${objectZIndex(\n            group.current,\n            camera,\n            zIndexRange\n          )}`;\n          el.style.transform = `translate3d(${vec[0]}px,${vec[1]}px,0) scale(1)`;\n          oldPosition.current = vec;\n          oldZoom.current = camera.zoom;\n        }\n      }\n    });\n\n    return <group {...props} ref={group} />;\n  }\n);\n","import React, { useEffect, useRef, useState, useContext } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport useAnnounceStore from './announceStore';\nimport { useA11ySectionContext } from './A11ySection';\nimport { stylesHiddenButScreenreadable } from './A11yConsts';\nimport { Html } from './Html';\n\ninterface A11yCommonProps {\n  role: 'button' | 'togglebutton' | 'link' | 'content' | 'image';\n  children: React.ReactNode;\n  description: string;\n  tabIndex?: number;\n  showAltText?: boolean;\n  focusCall?: (...args: any[]) => any;\n  debug?: boolean;\n  a11yElStyle?: Object;\n  hidden?: boolean;\n  dragThreshold?: number;\n}\n\ntype RoleProps =\n  | {\n      role: 'content';\n      activationMsg?: never;\n      deactivationMsg?: never;\n      actionCall?: never;\n      href?: never;\n      disabled?: never;\n      startPressed?: never;\n      tag?: 'p' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n    }\n  | {\n      role: 'button';\n      activationMsg?: string;\n      deactivationMsg?: never;\n      actionCall?: () => any;\n      href?: never;\n      disabled?: boolean;\n      startPressed?: never;\n      tag?: never;\n    }\n  | {\n      role: 'togglebutton';\n      activationMsg?: string;\n      deactivationMsg?: string;\n      actionCall?: () => any;\n      href?: never;\n      disabled?: boolean;\n      startPressed?: boolean;\n      tag?: never;\n    }\n  | {\n      role: 'link';\n      activationMsg?: never;\n      deactivationMsg?: never;\n      actionCall: () => any;\n      href: string;\n      disabled?: never;\n      startPressed?: never;\n      tag?: never;\n    }\n  | {\n      role: 'image';\n      activationMsg?: never;\n      deactivationMsg?: never;\n      actionCall?: never;\n      href?: never;\n      disabled?: never;\n      startPressed?: never;\n      tag?: never;\n    };\n\ntype Props = A11yCommonProps & RoleProps;\n\nconst A11yContext = React.createContext({\n  focus: false,\n  hover: false,\n  pressed: false,\n});\n\nA11yContext.displayName = 'A11yContext';\n\nconst useA11y = () => {\n  return useContext(A11yContext);\n};\n\nexport { useA11y };\n\nexport const A11y: React.FC<Props> = ({\n  children,\n  description,\n  activationMsg,\n  deactivationMsg,\n  tabIndex,\n  href,\n  role,\n  showAltText = false,\n  actionCall,\n  focusCall,\n  disabled,\n  debug = false,\n  a11yElStyle,\n  startPressed = false,\n  tag = 'p',\n  hidden = false,\n  dragThreshold,\n  ...props\n}) => {\n  let constHiddenButScreenreadable = Object.assign(\n    {},\n    stylesHiddenButScreenreadable,\n    { opacity: debug ? 1 : 0 },\n    a11yElStyle\n  );\n\n  const [a11yState, setA11yState] = useState({\n    hovered: false,\n    focused: false,\n    pressed: startPressed ? startPressed : false,\n  });\n\n  const a11yScreenReader = useAnnounceStore((state) => state.a11yScreenReader);\n\n  const overHtml = useRef(false);\n  const overMesh = useRef(false);\n\n  const domElement = useThree((state) => state.gl.domElement);\n\n  // temporary fix to prevent error -> keep track of our component's mounted state\n  const componentIsMounted = useRef(true);\n  useEffect(() => {\n    return () => {\n      domElement.style.cursor = 'default';\n      componentIsMounted.current = false;\n    };\n  }, []); // Using an empty dependency array ensures this on\n\n  React.Children.only(children);\n  // @ts-ignore\n  const handleOnPointerOver = (e) => {\n    if (e.eventObject) {\n      overMesh.current = true;\n    } else {\n      overHtml.current = true;\n    }\n    if (overHtml.current || overMesh.current) {\n      if (role !== 'content' && role !== 'image' && !disabled) {\n        domElement.style.cursor = 'pointer';\n      }\n      setA11yState({\n        hovered: true,\n        focused: a11yState.focused,\n        pressed: a11yState.pressed,\n      });\n    }\n  };\n  // @ts-ignore\n  const handleOnPointerOut = (e) => {\n    if (e.eventObject) {\n      overMesh.current = false;\n    } else {\n      overHtml.current = false;\n    }\n    if (!overHtml.current && !overMesh.current) {\n      if (componentIsMounted.current) {\n        domElement.style.cursor = 'default';\n        setA11yState({\n          hovered: false,\n          focused: a11yState.focused,\n          pressed: a11yState.pressed,\n        });\n      }\n    }\n  };\n\n  function handleBtnClick() {\n    //msg is the same need to be clean for it to trigger again in case of multiple press in a row\n    a11yScreenReader('');\n    window.setTimeout(() => {\n      if (typeof activationMsg === 'string') a11yScreenReader(activationMsg);\n    }, 100);\n    if (typeof actionCall === 'function') actionCall();\n  }\n\n  function handleToggleBtnClick() {\n    if (a11yState.pressed) {\n      if (typeof deactivationMsg === 'string')\n        a11yScreenReader(deactivationMsg);\n    } else {\n      if (typeof activationMsg === 'string') a11yScreenReader(activationMsg);\n    }\n    setA11yState({\n      hovered: a11yState.hovered,\n      focused: a11yState.focused,\n      pressed: !a11yState.pressed,\n    });\n    if (typeof actionCall === 'function') actionCall();\n  }\n\n  const returnHtmlA11yEl = () => {\n    if (role === 'button' || role === 'togglebutton') {\n      let disabledBtnAttr = disabled\n        ? {\n            disabled: true,\n          }\n        : null;\n      if (role === 'togglebutton') {\n        return (\n          <button\n            r3f-a11y=\"true\"\n            {...disabledBtnAttr}\n            aria-pressed={a11yState.pressed ? 'true' : 'false'}\n            tabIndex={tabIndex ? tabIndex : 0}\n            style={Object.assign(\n              constHiddenButScreenreadable,\n              disabled ? { cursor: 'default' } : { cursor: 'pointer' },\n              hidden\n                ? { visibility: 'hidden' as const }\n                : { visibility: 'visible' as const }\n            )}\n            onPointerOver={handleOnPointerOver}\n            onPointerOut={handleOnPointerOut}\n            onClick={(e) => {\n              e.stopPropagation();\n              if (disabled) {\n                return;\n              }\n              handleToggleBtnClick();\n            }}\n            onFocus={() => {\n              if (typeof focusCall === 'function') focusCall();\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: true,\n                pressed: a11yState.pressed,\n              });\n            }}\n            onBlur={() => {\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: false,\n                pressed: a11yState.pressed,\n              });\n            }}\n          >\n            {description}\n          </button>\n        );\n      } else {\n        //regular btn\n        return (\n          <button\n            r3f-a11y=\"true\"\n            {...disabledBtnAttr}\n            tabIndex={tabIndex ? tabIndex : 0}\n            style={Object.assign(\n              constHiddenButScreenreadable,\n              disabled ? { cursor: 'default' } : { cursor: 'pointer' },\n              hidden\n                ? { visibility: 'hidden' as const }\n                : { visibility: 'visible' as const }\n            )}\n            onPointerOver={handleOnPointerOver}\n            onPointerOut={handleOnPointerOut}\n            onClick={(e) => {\n              e.stopPropagation();\n              if (disabled) {\n                return;\n              }\n              handleBtnClick();\n            }}\n            onFocus={() => {\n              if (typeof focusCall === 'function') focusCall();\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: true,\n                pressed: a11yState.pressed,\n              });\n            }}\n            onBlur={() => {\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: false,\n                pressed: a11yState.pressed,\n              });\n            }}\n          >\n            {description}\n          </button>\n        );\n      }\n    } else if (role === 'link') {\n      return (\n        <a\n          r3f-a11y=\"true\"\n          style={Object.assign(\n            constHiddenButScreenreadable,\n            hidden\n              ? { visibility: 'hidden' as const }\n              : { visibility: 'visible' as const }\n          )}\n          href={href}\n          onPointerOver={handleOnPointerOver}\n          onPointerOut={handleOnPointerOut}\n          onClick={(e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            if (typeof actionCall === 'function') actionCall();\n          }}\n          onFocus={() => {\n            if (typeof focusCall === 'function') focusCall();\n            setA11yState({\n              hovered: a11yState.hovered,\n              focused: true,\n              pressed: a11yState.pressed,\n            });\n          }}\n          onBlur={() => {\n            setA11yState({\n              hovered: a11yState.hovered,\n              focused: false,\n              pressed: a11yState.pressed,\n            });\n          }}\n        >\n          {description}\n        </a>\n      );\n    } else {\n      let tabIndexP = tabIndex\n        ? {\n            tabIndex: tabIndex,\n          }\n        : null;\n      if (role === 'image') {\n        return (\n          <img\n            r3f-a11y=\"true\"\n            src=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E\"\n            alt={description}\n            {...tabIndexP}\n            style={Object.assign(\n              constHiddenButScreenreadable,\n              hidden\n                ? { visibility: 'hidden' as const }\n                : { visibility: 'visible' as const }\n            )}\n            onPointerOver={handleOnPointerOver}\n            onPointerOut={handleOnPointerOut}\n            onBlur={() => {\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: false,\n                pressed: a11yState.pressed,\n              });\n            }}\n            onFocus={() => {\n              if (typeof focusCall === 'function') focusCall();\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: true,\n                pressed: a11yState.pressed,\n              });\n            }}\n          />\n        );\n      } else {\n        const Tag = tag;\n        return (\n          <Tag\n            r3f-a11y=\"true\"\n            {...tabIndexP}\n            style={Object.assign(\n              constHiddenButScreenreadable,\n              hidden\n                ? { visibility: 'hidden' as const }\n                : { visibility: 'visible' as const }\n            )}\n            onPointerOver={handleOnPointerOver}\n            onPointerOut={handleOnPointerOut}\n            onBlur={() => {\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: false,\n                pressed: a11yState.pressed,\n              });\n            }}\n            onFocus={() => {\n              if (typeof focusCall === 'function') focusCall();\n              setA11yState({\n                hovered: a11yState.hovered,\n                focused: true,\n                pressed: a11yState.pressed,\n              });\n            }}\n          >\n            {description}\n          </Tag>\n        );\n      }\n    }\n  };\n\n  const HtmlAccessibleElement = React.useMemo(returnHtmlA11yEl, [\n    description,\n    a11yState,\n    hidden,\n    tabIndex,\n    href,\n    disabled,\n    startPressed,\n    tag,\n    actionCall,\n    focusCall,\n  ]);\n\n  let AltText = null;\n  if (showAltText && a11yState.hovered) {\n    AltText = (\n      <div\n        aria-hidden={true}\n        style={{\n          width: 'auto',\n          maxWidth: '300px',\n          display: 'block',\n          position: 'absolute',\n          top: '0px',\n          left: '0px',\n          transform: 'translate(-50%,-50%)',\n          background: 'white',\n          borderRadius: '4px',\n          padding: '4px',\n        }}\n      >\n        <p\n          aria-hidden={true}\n          style={{\n            margin: '0px',\n          }}\n        >\n          {description}\n        </p>\n      </div>\n    );\n  }\n\n  const section = useA11ySectionContext();\n  let portal = {};\n  if (section.current instanceof HTMLElement) {\n    portal = { portal: section };\n  }\n\n  return (\n    <A11yContext.Provider\n      value={{\n        hover: a11yState.hovered,\n        focus: a11yState.focused,\n        pressed: a11yState.pressed,\n      }}\n    >\n      <group\n        {...props}\n        onClick={(e) => {\n          e.stopPropagation();\n          if (disabled || (dragThreshold && e.delta > dragThreshold)) {\n            return;\n          }\n          if (role === 'button') {\n            handleBtnClick();\n          } else if (role === 'togglebutton') {\n            handleToggleBtnClick();\n          } else {\n            if (typeof actionCall === 'function') actionCall();\n          }\n        }}\n        onPointerOver={handleOnPointerOver}\n        onPointerOut={handleOnPointerOut}\n      >\n        {children}\n        <Html\n          style={{ width: '0px' }}\n          position={\n            // @ts-ignore\n            children.props.position ? children.props.position : 0\n          }\n          {...portal}\n        >\n          {AltText}\n          {HtmlAccessibleElement}\n        </Html>\n      </group>\n    </A11yContext.Provider>\n  );\n};\n","import React, { useEffect, useState, useContext } from 'react';\ninterface Props {\n  children: React.ReactNode;\n}\n\ntype aasetA11yPrefersState = {\n  prefersReducedMotion: boolean;\n  prefersDarkScheme: boolean;\n};\n\nconst A11yUserPreferencesContext = React.createContext({\n  a11yPrefersState: {\n    prefersReducedMotion: false,\n    prefersDarkScheme: false,\n  },\n  // tslint:disable:no-unused-variable\n  setA11yPrefersState: (_state: aasetA11yPrefersState) => {},\n  // tslint:enable:no-unused-variable\n});\n\nA11yUserPreferencesContext.displayName = 'A11yUserPreferencesContext';\n\nconst useUserPreferences = () => {\n  return useContext(A11yUserPreferencesContext);\n};\n\nexport { useUserPreferences, A11yUserPreferencesContext };\n\nexport const A11yUserPreferences: React.FC<Props> = ({ children }) => {\n  const [a11yPrefersState, setA11yPrefersState] = useState({\n    prefersReducedMotion: false,\n    prefersDarkScheme: false,\n  });\n\n  useEffect(() => {\n    const prefersReducedMotionMediaQuery = window.matchMedia(\n      '(prefers-reduced-motion: reduce)'\n    );\n    const prefersDarkSchemeMediaQuery = window.matchMedia(\n      '(prefers-color-scheme: dark)'\n    );\n\n    setA11yPrefersState({\n      prefersReducedMotion: prefersReducedMotionMediaQuery.matches,\n      prefersDarkScheme: prefersDarkSchemeMediaQuery.matches,\n    });\n\n    const handleReducedMotionPrefChange = (e: MediaQueryListEvent) => {\n      setA11yPrefersState({\n        prefersReducedMotion: e.matches,\n        prefersDarkScheme: prefersDarkSchemeMediaQuery.matches,\n      });\n    };\n    const handleDarkSchemePrefChange = (e: MediaQueryListEvent) => {\n      setA11yPrefersState({\n        prefersReducedMotion: prefersReducedMotionMediaQuery.matches,\n        prefersDarkScheme: e.matches,\n      });\n    };\n\n    if (typeof prefersReducedMotionMediaQuery.addEventListener === 'function') {\n      prefersReducedMotionMediaQuery.addEventListener(\n        'change',\n        handleReducedMotionPrefChange\n      );\n    }\n    if (typeof prefersDarkSchemeMediaQuery.addEventListener === 'function') {\n      prefersDarkSchemeMediaQuery.addEventListener(\n        'change',\n        handleDarkSchemePrefChange\n      );\n    }\n    return () => {\n      if (\n        typeof prefersReducedMotionMediaQuery.removeEventListener === 'function'\n      ) {\n        prefersReducedMotionMediaQuery.removeEventListener(\n          'change',\n          handleReducedMotionPrefChange\n        );\n      }\n      if (\n        typeof prefersDarkSchemeMediaQuery.removeEventListener === 'function'\n      ) {\n        prefersDarkSchemeMediaQuery.removeEventListener(\n          'change',\n          handleDarkSchemePrefChange\n        );\n      }\n    };\n  }, []);\n\n  return (\n    <A11yUserPreferencesContext.Provider\n      value={{\n        a11yPrefersState: {\n          prefersReducedMotion: a11yPrefersState.prefersReducedMotion,\n          prefersDarkScheme: a11yPrefersState.prefersDarkScheme,\n        },\n        setA11yPrefersState: setA11yPrefersState,\n      }}\n    >\n      {children}\n    </A11yUserPreferencesContext.Provider>\n  );\n};\n","import React, { useEffect } from 'react';\nimport useAnnounceStore from './announceStore';\n\nconst offScreenStyle = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  whiteSpace: 'nowrap' as const,\n  padding: 0,\n  width: '1px',\n  position: 'absolute' as const,\n};\n\nexport const A11yAnnouncer: React.FC = () => {\n  const message = useAnnounceStore((state) => state.message);\n\n  useEffect(() => {\n    const mouseClickListener = (e: MouseEvent) => {\n      if (\n        window.document.activeElement?.getAttribute('r3f-a11y') &&\n        e.detail !== 0\n      ) {\n        if (window.document.activeElement instanceof HTMLElement) {\n          window.document.activeElement.blur();\n        }\n      }\n    };\n    window.addEventListener('click', mouseClickListener);\n    return () => {\n      window.removeEventListener('click', mouseClickListener);\n    };\n  });\n\n  return (\n    <div style={offScreenStyle} aria-atomic=\"true\" aria-live=\"polite\">\n      {message}\n    </div>\n  );\n};\n","import React, { useLayoutEffect, useEffect, useState, useRef } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { useUserPreferences } from './A11yUserPreferences';\ninterface Props {}\n\nexport const A11yDebuger: React.FC<Props> = ({}) => {\n  const [el] = useState(() => document.createElement('div'));\n  const root = React.useMemo(() => ReactDOM.createRoot(el), [el]);\n  const [boundingStyle, setBoundingStyle] = useState({});\n  const [debugState, setDebugState] = useState({\n    prefersDarkScheme: false,\n    prefersReducedMotion: false,\n  });\n  const { a11yPrefersState, setA11yPrefersState } = useUserPreferences();\n  const domStructureRef = useRef(null);\n\n  useEffect(() => {\n    el.style.cssText = 'position:fixed;top:0;left:0;';\n    el.setAttribute('aria-hidden', 'true');\n    document.body.appendChild(el);\n    setDebugState({\n      prefersDarkScheme: a11yPrefersState.prefersDarkScheme,\n      prefersReducedMotion: a11yPrefersState.prefersReducedMotion,\n    });\n    const selectActiveEl = () => {\n      console.log('focused: ', document.activeElement);\n      let r3fa11ydebugidref = document.activeElement?.getAttribute(\n        'r3f-a11y-debug-id'\n      );\n      if (r3fa11ydebugidref) {\n        document.querySelectorAll('[r3fa11ydebugidref]').forEach((node) => {\n          //@ts-ignore\n          node.style.color = null;\n        });\n        let refEl = document.querySelector(\n          '[r3fa11ydebugidref=\"' + r3fa11ydebugidref + '\"]'\n        );\n        if (refEl) {\n          //@ts-ignore\n          refEl.style.color = 'red';\n        }\n      }\n    };\n    //@ts-ignore\n    const root = ReactDOM.createRoot(domStructureRef.current);\n    console.log('enregistre ev');\n    document.addEventListener('focus', selectActiveEl, true);\n    let superinterval = window.setInterval(() => {\n      let r3fPosId = 0;\n      //@ts-ignore\n      let elements = [];\n      document.querySelectorAll('[r3f-a11y]').forEach((node) => {\n        node.setAttribute('r3f-a11y-debug-id', '' + r3fPosId);\n        // let li = document.createElement('li');\n        // li.innerHTML = node.tagName ;\n        // //@ts-ignore\n        // domStructureRef.current.appendChild(li);\n        elements.push(\n          //@ts-ignore\n          <li key={r3fPosId} r3fa11ydebugidref={r3fPosId}>\n            {node.tagName}\n            <button\n              tabIndex={-1}\n              onClick={() => {\n                console.log(node);\n                let clientRect = node.getBoundingClientRect();\n                setBoundingStyle({\n                  width: clientRect.width,\n                  height: clientRect.height,\n                  top: clientRect.top,\n                  left: clientRect.left,\n                });\n              }}\n            >\n              Show\n            </button>\n          </li>\n        );\n        r3fPosId++;\n      });\n      //@ts-ignore\n      root.render(<>{elements}</>);\n    }, 2000);\n    return () => {\n      clearInterval(superinterval);\n      root.unmount();\n      console.log('remove ev');\n      document.removeEventListener('focus', selectActiveEl, true);\n    };\n  }, [a11yPrefersState]);\n\n  // @ts-ignore\n  const handleChange = (e) => {\n    // @ts-ignore\n    setA11yPrefersState({\n      prefersDarkScheme:\n        e.target.name === 'prefersDarkScheme'\n          ? e.target.checked\n          : debugState.prefersDarkScheme,\n      prefersReducedMotion:\n        e.target.name === 'prefersReducedMotion'\n          ? e.target.checked\n          : debugState.prefersReducedMotion,\n    });\n  };\n\n  useLayoutEffect(() => {\n    return void root.render(\n      <>\n        <label>\n          Prefer dark mode\n          <input\n            type=\"checkbox\"\n            name=\"prefersDarkScheme\"\n            checked={debugState.prefersDarkScheme}\n            onChange={handleChange}\n          />\n        </label>\n        <label>\n          Prefer reduced motion\n          <input\n            type=\"checkbox\"\n            name=\"prefersReducedMotion\"\n            checked={debugState.prefersReducedMotion}\n            onChange={handleChange}\n          />\n        </label>\n        <h3>R3F Dom order</h3>\n        <ul ref={domStructureRef}></ul>\n        <div\n          style={Object.assign(\n            {\n              position: 'absolute' as const,\n              border: '1px solid white',\n              borderRadius: '50%',\n              background:\n                'linear-gradient( 45deg, rgb(70, 255, 60, 0.7), rgb(0, 64, 193, 0.7))',\n              pointerEvents: 'none' as const,\n              transition: 'all 200ms ease',\n            },\n            boundingStyle\n          )}\n        ></div>\n      </>\n    );\n  });\n\n  return <></>;\n};\n"],"names":["useAnnounceStore","create","set","message","a11yScreenReader","stylesHiddenButScreenreadable","opacity","borderRadius","width","height","overflow","transform","display","userSelect","WebkitUserSelect","WebkitTouchCallout","margin","A11ySectionContext","React","createContext","createRef","displayName","v1","Vector3","v2","v3","calculatePosition","el","camera","size","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","heightHalf","x","y","Html","ref","children","eps","style","className","portal","zIndexRange","props","gl","useThree","scene","document","createElement","root","ReactDOM","createRoot","group","oldZoom","oldPosition","target","current","domElement","parentNode","updateMatrixWorld","vec","cssText","appendChild","removeChild","unmount","styles","position","render","useFrame","Math","abs","zoom","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","PI","isObjectBehindCamera","zIndex","PerspectiveCamera","OrthographicCamera","dist","distanceTo","A","far","near","round","objectZIndex","A11yContext","focus","hover","pressed","A11yUserPreferencesContext","a11yPrefersState","prefersReducedMotion","prefersDarkScheme","setA11yPrefersState","_state","useUserPreferences","useContext","offScreenStyle","border","clip","whiteSpace","padding","description","activationMsg","deactivationMsg","tabIndex","href","role","showAltText","actionCall","focusCall","disabled","debug","a11yElStyle","startPressed","tag","hidden","dragThreshold","constHiddenButScreenreadable","Object","assign","useState","hovered","focused","a11yState","setA11yState","state","overHtml","useRef","overMesh","componentIsMounted","useEffect","cursor","Children","only","handleOnPointerOver","e","eventObject","handleOnPointerOut","handleBtnClick","window","setTimeout","handleToggleBtnClick","HtmlAccessibleElement","useMemo","visibility","onPointerOver","onPointerOut","onClick","stopPropagation","onFocus","onBlur","preventDefault","tabIndexP","src","alt","AltText","maxWidth","top","left","background","section","HTMLElement","Provider","value","delta","mouseClickListener","activeElement","getAttribute","detail","blur","addEventListener","removeEventListener","boundingStyle","setBoundingStyle","debugState","setDebugState","domStructureRef","setAttribute","body","selectActiveEl","console","log","r3fa11ydebugidref","_document$activeEleme","querySelectorAll","forEach","node","color","refEl","querySelector","superinterval","setInterval","r3fPosId","elements","push","key","tagName","clientRect","getBoundingClientRect","clearInterval","handleChange","name","checked","useLayoutEffect","type","onChange","pointerEvents","transition","label","refpDesc","keys","reduce","acc","split","join","toLowerCase","pDesc","innerHTML","prepend","prefersReducedMotionMediaQuery","matchMedia","prefersDarkSchemeMediaQuery","matches","handleReducedMotionPrefChange","handleDarkSchemePrefChange"],"mappings":"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"}